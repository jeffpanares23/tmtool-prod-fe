{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"bg-white shadow-md rounded-lg p-6\"\n};\nvar _hoisted_2 = {\n  \"class\": \"flex justify-between items-center\"\n};\nvar _hoisted_3 = {\n  key: 0,\n  \"class\": \"text-red-500 mt-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", {\n    \"class\": \"text-lg font-semibold mb-4\"\n  }, \"Run Diagnostic\", -1)), _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $data.websiteUrl = $event;\n    }),\n    type: \"url\",\n    \"class\": \"flex-grow border rounded-lg p-3 text-gray-700 mr-4\",\n    placeholder: \"Enter URL or paste text here\",\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.websiteUrl]]), _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[1] || (_cache[1] = function () {\n      return $options.submitUrl && $options.submitUrl.apply($options, arguments);\n    }),\n    \"class\": \"bg-blue-500 text-white py-3 px-6 rounded-lg hover:bg-blue-600 transition\"\n  }, \" GO! \")]), $data.errorMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_3, _toDisplayString($data.errorMessage), 1)) : _createCommentVNode(\"\", true)]);\n}","map":{"version":3,"names":["key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","$event","$data","websiteUrl","type","placeholder","required","onClick","$options","submitUrl","apply","arguments","errorMessage","_hoisted_3","_toDisplayString","_createCommentVNode"],"sources":["C:\\Users\\RYZEN 5 5500\\Documents\\GitHub\\OUTSOURCE\\TMTOOL\\tmtool-prod-fe\\src\\modules\\website-diagnostic-tool\\components\\WebsiteInput.vue"],"sourcesContent":["<template>\r\n  <div class=\"bg-white shadow-md rounded-lg p-6\">\r\n    <h2 class=\"text-lg font-semibold mb-4\">Run Diagnostic</h2>\r\n    <div class=\"flex justify-between items-center\">\r\n      <input\r\n        v-model=\"websiteUrl\"\r\n        type=\"url\"\r\n        class=\"flex-grow border rounded-lg p-3 text-gray-700 mr-4\"\r\n        placeholder=\"Enter URL or paste text here\"\r\n        required\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        @click=\"submitUrl\"\r\n        class=\"bg-blue-500 text-white py-3 px-6 rounded-lg hover:bg-blue-600 transition\"\r\n      >\r\n        GO!\r\n      </button>\r\n    </div>\r\n    <p v-if=\"errorMessage\" class=\"text-red-500 mt-4\">{{ errorMessage }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      websiteUrl: \"\",\r\n      errorMessage: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    async submitUrl() {\r\n      this.errorMessage = \"\";\r\n      this.$emit(\"loading\"); // Trigger loading state in parent component\r\n\r\n      // ✅ Ensure URL has proper format\r\n      let formattedUrl = this.websiteUrl.trim();\r\n      if (!/^https?:\\/\\//i.test(formattedUrl)) {\r\n        formattedUrl = \"http://\" + formattedUrl;\r\n      }\r\n\r\n      try {\r\n        // ✅ Call `analyze-website` API\r\n        const response = await axios.post(\r\n          \"http://127.0.0.1:8081/api/analyze-website\",\r\n          { url: formattedUrl }\r\n        );\r\n\r\n        // ✅ Ensure the response contains valid data\r\n        if (!response.data || response.data.error) {\r\n          throw new Error(\r\n            response.data.error || \"Invalid response from server.\"\r\n          );\r\n        }\r\n\r\n        // ✅ Process API Response\r\n        const processedData = {\r\n          url: formattedUrl,\r\n          metadata: response.data.metadata || {},\r\n          sop: response.data.sop || {},\r\n          seo_checks: response.data.seo_checks || {},\r\n        };\r\n\r\n        // ✅ Emit results back to parent component\r\n        this.$emit(\"results\", processedData);\r\n      } catch (error) {\r\n        this.errorMessage =\r\n          error.response?.data?.error ||\r\n          \"An error occurred while processing the URL.\";\r\n        console.error(\"API Error:\", error);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"],"mappings":";;EACO,SAAM;AAAmC;;EAEvC,SAAM;AAAmC;;EAHlDA,GAAA;EAmB2B,SAAM;;;uBAlB/BC,mBAAA,CAmBM,OAnBNC,UAmBM,G,0BAlBJC,mBAAA,CAA0D;IAAtD,SAAM;EAA4B,GAAC,gBAAc,QACrDA,mBAAA,CAeM,OAfNC,UAeM,G,gBAdJD,mBAAA,CAME;IAVR,uBAAAE,MAAA,QAAAA,MAAA,gBAAAC,MAAA;MAAA,OAKiBC,KAAA,CAAAC,UAAU,GAAAF,MAAA;IAAA;IACnBG,IAAI,EAAC,KAAK;IACV,SAAM,oDAAoD;IAC1DC,WAAW,EAAC,8BAA8B;IAC1CC,QAAQ,EAAR;gCAJSJ,KAAA,CAAAC,UAAU,E,GAMrBL,mBAAA,CAMS;IALPM,IAAI,EAAC,QAAQ;IACZG,OAAK,EAAAP,MAAA,QAAAA,MAAA;MAAA,OAAEQ,QAAA,CAAAC,SAAA,IAAAD,QAAA,CAAAC,SAAA,CAAAC,KAAA,CAAAF,QAAA,EAAAG,SAAA,CAAS;IAAA;IACjB,SAAM;KACP,OAED,E,GAEOT,KAAA,CAAAU,YAAY,I,cAArBhB,mBAAA,CAAuE,KAAvEiB,UAAuE,EAAAC,gBAAA,CAAnBZ,KAAA,CAAAU,YAAY,SAnBpEG,mBAAA,W","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}